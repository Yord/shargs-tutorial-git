#!/usr/bin/env node

const {parserSync} = require('shargs')
const {command, flag, subcommand} = require('shargs-opts')
const {flagAsBool, splitShortOpts} = require('shargs-parser')

const init = subcommand([
  flag('quiet', ['-q', '--quiet'])
])

const opts = [
  flag('help', ['--help']),
  init('init', ['init'])
]

const git    = command('git', opts)

const stages = {
  argv: [splitShortOpts],
  args: [flagAsBool('help')]
}

const parser = parserSync(stages)
const parse  = parser(git)

const argv   = process.argv.slice(2)
const res    = parse(argv)

console.log(JSON.stringify(res, null, 2))